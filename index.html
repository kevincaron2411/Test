<script>document.write('<body id="body" style="background:white;overflow:hidden;margin:0px"></body><canvas id="canvas"><canvas>');const canvas=document.getElementById("canvas");const ctx=canvas.getContext("2d");let width=256,height=144,borderMode=true,cameraX=0,cameraY=0,cameraR=0,title="NoNameJs",canvasColor="white",borderColor="black",cursor="default";function resizeCanvas(){if (borderMode==true){canvas.width=width * pixelScale(); canvas.height=height * pixelScale();}else{canvas.width=window.innerWidth; canvas.height=window.innerHeight;}canvas.style.marginLeft=(window.innerWidth - canvas.width) / 2; canvas.style.marginTop=(window.innerHeight - canvas.height) / 2;}function updateDocumentProperties(){document.getElementById("body").style.background=borderColor; document.getElementById("canvas").style.background=canvasColor; document.title=title; document.body.style.cursor=cursor;}function pixelScale(){if (width / height > window.innerWidth / window.innerHeight){return window.innerWidth / width;}else{return window.innerHeight / height;}}function windowWidth(){return canvas.width / pixelScale();}function windowHeight(){return canvas.height / pixelScale();}let startTime=0;let time=0,lastUpdate=0;let setupCalled=false;function loop(){updateDocumentProperties(); step(); display(); window.requestAnimationFrame(loop);}function updateCanvasMouse(){resizeCanvas(); constrainMouseOnCanvas();}function step(){time=Date.now() - startTime; while (lastUpdate + 1000 / 60 < time){updateCanvasMouse(); if (typeof update=="function"){update();}resetButtonPressedList(); lastUpdate +=1000 / 60;}}window.addEventListener("load",function(){if (typeof preload=="function"){preload();}updateDocumentProperties(); updateCanvasMouse(); if (typeof setup=="function"){setup();}startTime=Date.now(); window.requestAnimationFrame(loop);});function display(){ctx.imageSmoothingEnabled=false; ctx.clearRect(0,0,canvas.width,canvas.height); ctx.save(); ctx.scale(pixelScale(),pixelScale()); ctx.save(); ctx.translate(windowWidth() / 2,windowHeight() / 2); ctx.rotate(degreesToRadians(-cameraR)); ctx.translate(-cameraX,-cameraY); if (typeof displayScene=="function"){displayScene();}ctx.restore(); if (typeof displayHub=="function"){displayHub();}ctx.restore();}function degreesToRadians(a){return a * Math.PI / 180;}function random(a,b){return a + Math.random() * (b - a);}function angleToPosition(x1,y1,x2,y2){if (y1 > y2){return -radiansToDegrees(Math.acos((x2 - x1) / distance(x1,y1,x2,y2)));}return -radiansToDegrees(Math.acos((x1 - x2) / distance(x1,y1,x2,y2))) + 180;}function distance(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2 - x1,2) + Math.pow(y2 - y1,2));}function radiansToDegrees(a){return a * (180 / Math.PI);}function constrain(a,b,c){return Math.max(Math.min(a,c),b);}function lerp(a,b,c){return a + (b - a) / c;}function wait(ms){let d=new Date(); let d2=null; do{d2=new Date();}while(d2-d < ms);}function moveAtAngle(a,b){return{x:Math.cos(degreesToRadians(a)) * b,y:Math.sin(degreesToRadians(a)) * b};}function moveTowards(a,b,c,d,e){return{x:moveAtAngle(angleToPosition(a,b,c,d),e).x,y:moveAtAngle(angleToPosition(a,b,c,d),e).y};}function color(r,g,b){return "rgb(" + r.toString() + "," + g.toString() + "," + b.toString() + ")";}function loadImage(a){let imageHolder=new Image(); imageHolder.src=a; return imageHolder;}let alignX=0,alignY=0,fill="black",stroke="black",strokeWidth=1,parallax=1,opacity=100,scaleX=1,scaleY=1;function fillRect(a,b,c,d,e){ctx.save(); ctx.translate(a + cameraX * (1 - parallax),b + cameraY * (1 - parallax)); ctx.rotate(degreesToRadians(e)); ctx.globalAlpha=opacity; ctx.fillStyle=fill; ctx.scale(scaleX,scaleY); ctx.fillRect(-c / 2 - alignX * (c / 2),-d / 2 - alignY * (d / 2),c,d); ctx.restore();}function strokeRect(a,b,c,d,e){ctx.save(); ctx.translate(a + cameraX * (1 - parallax),b + cameraY * (1 - parallax)); ctx.rotate(degreesToRadians(e)); ctx.lineWidth=strokeWidth; ctx.strokeStyle=stroke; ctx.globalAlpha=opacity; ctx.scale(scaleX,scaleY); ctx.strokeRect(-c / 2 - alignX * (c / 2),-d / 2 - alignY * (d / 2),c,d); ctx.restore();}function rect(a,b,c,d,e){ctx.save(); ctx.translate(a + cameraX * (1 - parallax),b + cameraY * (1 - parallax)); ctx.rotate(degreesToRadians(e)); ctx.lineWidth=strokeWidth; ctx.strokeStyle=stroke; ctx.fillStyle=fill; ctx.globalAlpha=opacity; ctx.scale(scaleX,scaleY); ctx.fillRect(-c / 2 - alignX * (c / 2),-d / 2 - alignY * (d / 2),c,d); ctx.strokeRect(-c / 2 - alignX * (c / 2),-d / 2 - alignY * (d / 2),c,d); ctx.restore();}function image(a,b,c,d,e,f){ctx.save(); ctx.translate(b + cameraX * (1 - parallax),c + cameraY * (1 - parallax)); ctx.rotate(degreesToRadians(f)); ctx.globalAlpha=opacity; ctx.scale(scaleX,scaleY); ctx.drawImage(a,-d / 2 - alignX * (d / 2),-e / 2 - alignY * (e / 2),d,e); ctx.restore();}let keysDown={},buttonsDown={},buttonsPressed={},keysPressed={};window.addEventListener("keydown",function(e){keysDown[e.keyCode]=true; keysPressed[e.keyCode]=true; if (typeof keyPressed=="function"){keyPressed(e);}});window.addEventListener("keyup",function(e){delete keysDown[e.keyCode]; delete keysPressed[e.keyCode]; if (typeof keyReleased=="function"){keyReleased(e);}});window.addEventListener("mousedown",function(e){buttonsDown[e.button]=true; buttonsPressed[e.button]=true; if (typeof mousePressed=="function"){mousePressed(e);}});window.addEventListener("mouseup",function(e){delete buttonsDown[e.button]; delete buttonsPressed[e.button]; if (typeof mouseReleased=="function"){mouseReleased(e);}});function keyDown(key){if (key==undefined && Object.keys(keysDown).length > 0){return true;}if (keysDown[key]==true){return true;}return false;}function keyPressed(key){if (key==undefined && Object.keys(keysPressed).length > 0){return true;}if (keysPressed[key]==true){return true;}return false;}function mouseDown(button){if (button==undefined && Object.keys(buttonsDown).length > 0){return true;}if (buttonsDown[button]==true){return true;}return false;}function mousePressed(button){if (button==undefined && Object.keys(buttonsPressed).length > 0){return true;}if (buttonsPressed[button]==true){return true;}return false;}function resetButtonPressedList(){keysPressed=[]; buttonsPressed=[];}let mwx=0,mwy=0;window.addEventListener("mousemove",function(e){updateMousePosition(e)});window.addEventListener("mousewheel",function(e){updateMousePosition(e)});function updateMousePosition(e){mwx=e.clientX; mwy=e.clientY;}function constrainMouseOnCanvas(){mwx=constrain(mwx,0,window.innerWidth); mwy=constrain(mwy,0,window.innerHeight);}function translateMousePositionWithCameraRotation(a,b,c,d,e){a -=c; b -=d; let radians=e * (Math.PI / 180); let cos=Math.cos(radians); let sin=Math.sin(radians); let xPos=(a * cos) + (b * sin); let yPos=(-a * sin) + (b * cos); xPos=Math.floor(xPos * 100) / 100; yPos=Math.floor(yPos * 100) / 100; return{x:xPos,y:yPos};}function mouseX(){this.mcx=constrain((mwx - parseInt(canvas.style.marginLeft)) / pixelScale(),0,windowWidth()); this.mcy=constrain((mwy - parseInt(canvas.style.marginTop)) / pixelScale(),0,windowHeight()); return translateMousePositionWithCameraRotation((this.mcx - (windowWidth() / 2 - cameraX)),(this.mcy - (windowHeight() / 2 - cameraY)),cameraX,cameraY,-cameraR).x + cameraX;}function mouseY(){this.mcx=constrain((mwx - parseInt(canvas.style.marginLeft)) / pixelScale(),0,windowWidth()); this.mcy=constrain((mwy - parseInt(canvas.style.marginTop)) / pixelScale(),0,windowHeight()); return translateMousePositionWithCameraRotation((this.mcx - (windowWidth() / 2 - cameraX)),(this.mcy - (windowHeight() / 2 - cameraY)),cameraX,cameraY,-cameraR).y + cameraY;}function MouseX(){return constrain((mwx - parseInt(canvas.style.marginLeft)) / pixelScale(),0,windowWidth());}function MouseY(){return constrain((mwy - parseInt(canvas.style.marginTop)) / pixelScale(),0,windowHeight());}</script><img id="mario" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAABUCAYAAAAWN76TAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAANjSURBVGhD7ZvBb0xRFMZvZ6cWVsqORKIhTUrEwkJERNjYsNOqJkxrozaSrmrBTvoPjKmkitggERsSQiNiU9ImlFqxoSEWFsau437nvRnn6jvcGzMHcX7J+87p7Z2Z097v3Xvfe21HZeFD3bWYx91dbqrTJ7VON+BqSXll4Y1Pfk4pj/8U/1/RsMHwVn90rw/y8/jmdkh/kF9CeA85Kfbh7yNh9tAiuegYG9xH+Az5mrlhBPIO0mQN5CGkEvSPweyhRdTiwheLRb8QrN3l8+khd9VdcH1bfD57xOeXm7nzeavxdeaZ2UMP0R4xlmiHDWIwe2gRFM0Xjn1o2Ag5FEz+fQizkD9jDWD20KJlRS9BxjOh6SgXnsf0kcDi0jjMHloERU9CzmZyGOEiZFScMfhwS3QwobAbsj9ol+CW4Jg9tCiVsaDcxoIylbmBbEBZEnzofweaP55CnrsSajuH2rDx+Y7ZQ4tSFWfnAZyhA3lTBg3TA8gdSCH0E59uSsgzyIvlC0r+ntwGRN4/BrOHFkHRxyC4KsmyJtIismyIc2gm2QbpEWekZVYpyCXMHmr4db3eOPyXhYe3Rz07+cfFvOh17TrMHloERTe2gTg41ElaRHIwbo2ZhOetgtdm9tBCLJoPRwxkiYIFgi9MMXkVoR+ySazB7KFFVNF8mOgF+UxyDeEKZC7IBxHOZMJzvg+R8iV8zhg+axoNhZg9tIgqmt9NXUQDXWcOuT0IqyAr3F2E15AbwR3XnQgHIevccQS6dTIv5tLFLMfsoYVYtHSDXYI/sa0h9EBmgqGPIcYqZg8tkotOffjeDsweWohF07neC7kVLBwcySp8BphAwMNdtxnyS3h/aR9i9tAiquhUqxxFWJnJI4SbkLfB0Eu5bU3/JqKKpk47IB9Fq0i2oTmDRvqL+4RwCjIf5HQx2wUZc1XsNwax35hDQyFmDy2Si+ZWeYVwAjIR2IDn7cDsoYVYdBmT/CQm+d7sttUTyGpIIbR+0M0PkkKuQ+jvTu8F/fn788+VMHto0Zai+dDH2CYV+01rEVW0NJOk5hzeHjNjcMweWiQXPQzZABlJzmcQyBJ7wz7YjuZHDGYPLZKLLkPo2cpLSBL0qI4ufkeD9+HtMVYxe2iR/E+UsWd4K/jxSW0Ds4cOzn0DY1DYSJWFUiYAAAAASUVORK5CYII="/><script>let x=0,y=0,vy=0,grounded=false,img=document.getElementById("mario"),Xscale=0,scaleTargetX=1;let particles=[];function preload(){borderMode=false; cursor="none";}function update(){if (keyDown(68) - keyDown(65) !=0 || vy !=0){for (let i=0;i < 1;i ++){particles.push(new Particle(x,y + img.height / 4 / 2));}}if (mouseDown(0)){particles.push(new Particle(mouseX(),mouseY()));}for (let i=particles.length - 1;i >=0;i --){particles[i].update(); if (particles[i].dead()==true){particles.splice(i,1);}}vy +=0.1; y +=vy; x +=keyDown(68) - keyDown(65); cameraR +=keyDown(69) - keyDown(81); grounded=false; if (y > 50 - 8 - img.height / 4 / 2 && x < 50 + img.width / 4 / 2 && x > -50 - img.width / 4 / 2){y=50 - 8 - img.height / 4 / 2; vy=0; grounded=true;}if (keyDown(32)==true && grounded==true){vy=-3;}cameraX=lerp(cameraX,x + (mouseX() - x) / 4,10); cameraY=lerp(cameraY,y + (mouseY() - y) / 4,10); Xscale=lerp(Xscale,scaleTargetX,5); if (keyDown(65)==true && keyDown(68)==false){scaleTargetX=-1;}if (keyDown(65)==false && keyDown(68)==true){scaleTargetX=1;}if (mousePressed(1)){cameraX +=random(-10,10); cameraY +=random(-10,10);}}function displayScene(){stroke=color(225,225,225); strokeRect(0,0,windowWidth(),windowHeight(),0); for (let i=particles.length - 1;i >=0;i --){particles[i].shadow();}opacity=1; stroke=color(225,225,225); fill=color(225,225,225); scaleX=1; strokeRect(1,51,100,16); scaleX=Xscale; fillRect(x + 1,y + 1,img.width / 4,img.height / 4,0); strokeRect(mouseX() + 1,mouseY() + 1,3,3,time / 10); for (let i=particles.length - 1;i >=0;i --){particles[i].display();}opacity=1; scaleX=Xscale; image(img,x,y,img.width / 4,img.height / 4,0); stroke="black"; scaleX=1; strokeRect(0,50,100,16); strokeRect(mouseX(),mouseY(),3,3,time / 10);}function Particle(x,y){this.x=x; this.y=y; this.r=random(0,360); this.vr=random(-5,5); this.lifeTime=60; this.speed=random(0,1); this.s=random(1,5); this.fill=color(random(200,255),0,random(0,100)); this.update=function(){this.y +=moveAtAngle(this.r,this.speed).y; this.x +=moveAtAngle(this.r,this.speed).x; this.r +=this.vr; this.lifeTime --;}; this.display=function(){scaleX=1; fill=this.fill; opacity=this.lifeTime / 30; fillRect(this.x,this.y,this.s,this.s,this.r);}; this.shadow=function(){scaleX=1; fill=color(225,225,225); opacity=this.lifeTime / 30; fillRect(this.x + 1,this.y + 1,this.s,this.s,this.r);}; this.dead=function(){if (this.lifeTime <=0){return true;}return false;};}</script>